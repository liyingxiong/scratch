'''
Created on 19.02.2016

@author: Yingxiong
'''

import numpy as np
import matplotlib.pyplot as plt

slip1 = np.array([0.0, 0.0167, 0.033399999999999999, 0.050099999999999999, 0.066799999999999998, 0.089999999999999997, 0.10777777777777778, 0.12555555555555556, 0.14333333333333331, 0.16111111111111109, 0.17888888888888888,
                  0.19666666666666666, 0.21444444444444444, 0.23222222222222222, 0.25, 0.34999999999999998, 0.51428571428571423, 0.6785714285714286, 0.84285714285714286, 1.0071428571428571, 1.1714285714285713, 1.3357142857142859, 1.5])
bond1 = np.array([0.0, 7.6088333549124725, 15.21766681176379, 22.826500268615117, 30.435333725466453, 26.22680501263744, 21.72889377287015, 20.64915445555593, 7.446138959763085, 6.744324296530344, 6.535446157571006,
                  6.387625831079449, 6.277306042775117, 6.195209036126417, 6.144971305702221, 5.943285240411173, 6.086392458385862, 6.040626787139278, 6.109113424693133, 6.137670292907936, 6.115076842532124, 6.103835908601188, 6.184784029252357])

slip2 = np.array([0.0, 0.022349999999999998, 0.044699999999999997, 0.070000000000000007, 0.090000000000000011, 0.11000000000000001, 0.13, 0.15000000000000002, 0.17000000000000001, 0.19,
                  0.21000000000000002, 0.23000000000000001, 0.25, 0.34999999999999998, 0.51428571428571423, 0.6785714285714286, 0.84285714285714286, 1.0071428571428571, 1.1714285714285713, 1.3357142857142859, 1.5])
bond2 = np.array([0.0, 17.701306700132097, 35.402613432976686, 34.41342764904337, 31.208356362179508, 27.370911463157036, 20.4260351641487, 14.72146743080458, 13.359017564362818, 12.862749686231835, 12.439410417802359,
                  11.564533516572686, 11.390762471483313, 11.108035475066938, 10.907086484456359, 10.927076200478599, 11.256443606270846, 11.110249743579576, 11.126353400658614, 11.024596683726228, 11.111594980524512])

slip3 = np.array([0.0, 0.030849999999999999, 0.061699999999999998, 0.12, 0.13999999999999999, 0.16, 0.17999999999999999, 0.20000000000000001, 0.22, 0.23999999999999999, 0.26000000000000001,
                  0.28000000000000003, 0.29999999999999999, 0.34999999999999998, 0.51428571428571423, 0.6785714285714286, 0.84285714285714286, 1.0071428571428571, 1.1714285714285713, 1.3357142857142859, 1.5])
bond3 = np.array([0.0, 19.531870935846296, 39.06374191200411, 35.13245161327588, 34.86040395302558, 34.118784844044605, 33.164131887624976, 17.570528297506577, 15.64891401963593, 13.45859492092352,
                  11.23505687665982, 10.562053272750111, 10.02457117454648, 9.402856922596214, 8.693647863640045, 8.6230584738389, 8.68140796212051, 8.61385286179438, 8.450586540242105, 8.481673272919226, 8.54978551615499])

slip4 = np.array([0.0, 0.057500000000000002, 0.115, 0.14999999999999999, 0.16666666666666666, 0.18333333333333332, 0.20000000000000001, 0.21666666666666667, 0.23333333333333334, 0.25, 0.26666666666666666,
                  0.28333333333333333, 0.29999999999999999, 0.34999999999999998, 0.51428571428571423, 0.6785714285714286, 0.84285714285714286, 1.0071428571428571, 1.1714285714285713, 1.3357142857142859, 1.5])
bond4 = np.array([0.0, 15.293392386987824, 31.10578484956067, 29.08624455044272, 28.122932687946694, 25.124475509005038, 22.037427941448023, 21.334682957600144, 8.885563341721895, 8.46724264720299,
                  8.400087115745553, 8.390761710431336, 8.327999814223086, 8.47124979441856, 8.950601800999078, 9.164418152185474, 9.722647682676415, 10.118971686018229, 10.372509959011435, 10.43814261528225, 10.578404516063465])

slip5 = np.array([0.0, 0.047750000000000001, 0.095500000000000002, 0.12, 0.13999999999999999, 0.16, 0.17999999999999999, 0.20000000000000001, 0.22, 0.23999999999999999, 0.26000000000000001,
                  0.28000000000000003, 0.29999999999999999, 0.34999999999999998, 0.51428571428571423, 0.6785714285714286, 0.84285714285714286, 1.0071428571428571, 1.1714285714285713, 1.3357142857142859, 1.5])
bond5 = np.array([0.0, 15.56219604033105, 31.81953493892064, 26.104446008346834, 23.977774950282, 22.312332862871667, 9.54675528459605, 8.751285405457157, 8.407042658775277, 8.085145115761568,
                  7.863267674383558, 7.80766101866833, 7.823214104431405, 7.8489372473932475, 8.003063589054706, 8.051872262440984, 8.022129065893166, 7.986851855831132, 7.809959004410668, 7.720275331593954, 7.6178569667237515])

slip6 = np.array([0.0, 0.030849999999999999, 0.061699999999999998, 0.089999999999999997, 0.11333333333333333, 0.13666666666666666, 0.15999999999999998, 0.18333333333333332, 0.20666666666666667, 0.22999999999999998,
                  0.2533333333333333, 0.27666666666666662, 0.29999999999999999, 0.34999999999999998, 0.51428571428571423, 0.6785714285714286, 0.84285714285714286, 1.0071428571428571, 1.1714285714285713, 1.3357142857142859, 1.5])
bond6 = np.array([0.0, 15.680044228140858, 31.36008850780363, 27.051761218813624, 23.671453961241415, 8.427861663021929, 6.643642738255938, 5.978452210173134, 5.422476049188153, 5.100749880111076,
                  5.005226087357627, 4.8558570794714235, 4.784333227890493, 4.919874878109198, 5.476339958388238, 6.077992141937612, 6.542295737296617, 6.903326356820516, 7.2840610394798615, 7.708948778394801, 8.236999765777279])

slip7 = np.array([0.0, 0.044999999999999998, 0.089999999999999997, 0.12, 0.13999999999999999, 0.16, 0.17999999999999999, 0.20000000000000001, 0.22, 0.23999999999999999, 0.26000000000000001,
                  0.28000000000000003, 0.29999999999999999, 0.34999999999999998, 0.51428571428571423, 0.6785714285714286, 0.84285714285714286, 1.0071428571428571, 1.1714285714285713, 1.3357142857142859, 1.5])
bond7 = np.array([0.0, 15.462963888886003, 31.528284932814625, 32.075213536139664, 32.88795940325237, 33.72689195515675, 31.12751614644016, 29.93821749670961, 11.633678248015123, 10.660910470361458,
                  10.39549975793086, 10.164809287634503, 10.118190243849511, 10.11888897109841, 9.969239565994119, 10.219964838281948, 10.467254855123107, 10.694617095749473, 10.665265059092091, 10.574387510391208, 10.64353546765347])

slip8 = np.array([0.0, 0.052999999999999999, 0.106, 0.14000000000000001, 0.15777777777777779, 0.17555555555555558, 0.19333333333333333, 0.21111111111111111, 0.22888888888888889, 0.24666666666666665,
                  0.26444444444444443, 0.28222222222222221, 0.29999999999999999, 0.34999999999999998, 0.51428571428571423, 0.6785714285714286, 0.84285714285714286, 1.0071428571428571, 1.1714285714285713, 1.3357142857142859, 1.5])
bond8 = np.array([0.0, 17.52232098843854, 35.04464201114325, 30.393006402216656, 30.06545088665049, 29.73789533868206, 7.154277705110144, 6.524232593913113, 6.252544826713279, 6.121011820770713,
                  5.987578887883472, 5.9051308298037535, 5.885357006730958, 5.7958927251824734, 5.723336602238125, 5.746305887642299, 5.841020272617518, 5.958081494172905, 6.057469247156753, 6.151418224617531, 6.322017709239996])

slip9 = np.array([0.0, 0.068000000000000005, 0.14000000000000001, 0.15777777777777779, 0.17555555555555558, 0.19333333333333333, 0.21111111111111111, 0.22888888888888889, 0.24666666666666665,
                  0.26444444444444443, 0.28222222222222221, 0.29999999999999999, 0.34999999999999998, 0.51428571428571423, 0.6785714285714286, 0.84285714285714286, 1.0071428571428571, 1.1714285714285713, 1.3357142857142859, 1.5])
bond9 = np.array([0.0, 22.27077327623037, 24.049614815523725, 24.298086737413268, 23.113843536170066, 8.075206037936516, 7.548952177455171, 7.274727342642916, 7.128226105265697, 7.03600514791491,
                  6.9313589955015535, 6.898229278366353, 6.937731981962904, 7.19706785535528, 7.285418198392122, 7.329356973063341, 7.426872276678061, 7.258346772067938, 7.3049539123992435, 7.086839124634319])

slip10 = np.array([0.0, 0.092700000000000005, 0.14000000000000001, 0.15777777777777779, 0.17555555555555558, 0.19333333333333333, 0.21111111111111111, 0.22888888888888889, 0.24666666666666665,
                   0.26444444444444443, 0.28222222222222221, 0.29999999999999999, 0.34999999999999998, 0.51428571428571423, 0.6785714285714286, 0.84285714285714286, 1.0071428571428571, 1.1714285714285713, 1.3357142857142859, 1.5])
bond10 = np.array([0.0, 33.634056245090775, 27.255419956987847, 26.79563837185104, 9.877309186150079, 9.00290455620587, 8.761121488933817, 8.676251137277644, 8.616412504256395, 8.593444181811302,
                   8.56845218287728, 8.52604742348907, 8.583767657705087, 9.14530840941739, 9.334744679731626, 9.503887533535286, 9.462907944097832, 9.47930585104469, 9.504463943551565, 9.698642630331797])

slip11 = np.array([0.0, 0.126, 0.14999999999999999, 0.16666666666666666, 0.18333333333333332, 0.20000000000000001, 0.21666666666666667, 0.23333333333333334, 0.25, 0.26666666666666666,
                   0.28333333333333333, 0.29999999999999999, 0.34999999999999998, 0.51428571428571423, 0.6785714285714286, 0.84285714285714286, 1.0071428571428571, 1.1714285714285713, 1.3357142857142859, 1.5])
bond11 = np.array([0.0, 29.582213488721056, 24.680785160160525, 24.270093580851924, 6.7554759181538655, 6.29149983330559, 6.200309402070533, 6.158428430896445, 6.1078024292315725, 6.082726050036531,
                   6.0823689064917135, 6.058499860059061, 6.064142696511199, 6.658856926595552, 6.762527053915721, 6.918224328434968, 7.016693714742273, 7.012744732517623, 6.973047457550533, 7.017714123137747])

slip12 = np.array([0.0, 0.109, 0.13, 0.1488888888888889, 0.16777777777777778, 0.18666666666666665, 0.20555555555555555, 0.22444444444444445, 0.24333333333333332, 0.26222222222222219,
                   0.28111111111111109, 0.29999999999999999, 0.34999999999999998, 0.51428571428571423, 0.6785714285714286, 0.84285714285714286, 1.0071428571428571, 1.1714285714285713, 1.3357142857142859, 1.5])
bond12 = np.array([0.0, 27.745056490147885, 23.870070728610887, 23.2961194362025, 5.900114090993536, 5.40295223684805, 5.345668531187051, 5.346507811486545, 5.329607019516358, 5.368589821415174,
                   5.4406724846731285, 5.471101107257605, 5.671309366906551, 6.180676688601286, 6.65936035760773, 7.062846755793178, 7.079642638774973, 7.193520241104466, 7.241010036327608, 7.343785543861939])

plt.plot(slip1, bond1, label='V4_TA-01')
plt.plot(slip2, bond2, label='V4_TA-02')
plt.plot(slip3, bond3, label='V4_TA-03')
# plt.plot(slip4, bond4, label='V4_TA-04')
# plt.plot(slip5, bond5, label='V4_TA-05')
# plt.plot(slip6, bond6, label='V4_TA-06')
# plt.plot(slip7, bond7, label='V4_TA-07')
# plt.plot(slip8, bond8, label='V4_TA-08')
# plt.plot(slip9, bond9, label='V4_TA-09')
# plt.plot(slip10, bond10, label='V4_TA-010')
# plt.plot(slip11, bond11, label='V4_TA-011')
# plt.plot(slip12, bond12, label='V4_TA-012')

x_long = np.array([0.,  0.01102204,  0.02204409,  0.03306613,  0.04408818,
                   0.05511022,  0.06613226,  0.07715431,  0.08817635,  0.0991984,
                   0.11022044,  0.12124248,  0.13226453,  0.14328657,  0.15430862,
                   0.16533066,  0.17635271,  0.18737475,  0.19839679,  0.20941884,
                   0.22044088,  0.23146293,  0.24248497,  0.25350701,  0.26452906,
                   0.2755511,  0.28657315,  0.29759519,  0.30861723,  0.31963928,
                   0.33066132,  0.34168337,  0.35270541,  0.36372745,  0.3747495,
                   0.38577154,  0.39679359,  0.40781563,  0.41883768,  0.42985972,
                   0.44088176,  0.45190381,  0.46292585,  0.4739479,  0.48496994,
                   0.49599198,  0.50701403,  0.51803607,  0.52905812,  0.54008016,
                   0.5511022,  0.56212425,  0.57314629,  0.58416834,  0.59519038,
                   0.60621242,  0.61723447,  0.62825651,  0.63927856,  0.6503006,
                   0.66132265,  0.67234469,  0.68336673,  0.69438878,  0.70541082,
                   0.71643287,  0.72745491,  0.73847695,  0.749499,  0.76052104,
                   0.77154309,  0.78256513,  0.79358717,  0.80460922,  0.81563126,
                   0.82665331,  0.83767535,  0.84869739,  0.85971944,  0.87074148,
                   0.88176353,  0.89278557,  0.90380762,  0.91482966,  0.9258517,
                   0.93687375,  0.94789579,  0.95891784,  0.96993988,  0.98096192,
                   0.99198397,  1.00300601,  1.01402806,  1.0250501,  1.03607214,
                   1.04709419,  1.05811623,  1.06913828,  1.08016032,  1.09118236,
                   1.10220441,  1.11322645,  1.1242485,  1.13527054,  1.14629259,
                   1.15731463,  1.16833667,  1.17935872,  1.19038076,  1.20140281,
                   1.21242485,  1.22344689,  1.23446894,  1.24549098,  1.25651303,
                   1.26753507,  1.27855711,  1.28957916,  1.3006012,  1.31162325,
                   1.32264529,  1.33366733,  1.34468938,  1.35571142,  1.36673347,
                   1.37775551,  1.38877756,  1.3997996,  1.41082164,  1.42184369,
                   1.43286573,  1.44388778,  1.45490982,  1.46593186,  1.47695391,
                   1.48797595,  1.498998])

y_long = np.array([0.,   3.35204452,   6.70408904,  10.05613356,
                   13.40817808,  16.76022259,  20.11226711,  23.46431163,
                   26.81635615,  29.48827121,  31.34543173,  32.55639685,
                   33.81696035,  35.12379931,  36.41920844,  37.71204356,
                   39.00487869,  40.29771381,  41.59054894,  42.67261036,
                   43.51286392,  43.93861775,  43.72603547,  43.51345319,
                   43.30087092,  43.08828864,  42.87570637,  42.81600767,
                   42.73736802,  42.86970695,  43.02069045,  43.17167395,
                   43.32265744,  43.53595866,  43.797239,  43.79726057,
                   43.55416503,  43.33132248,  43.16750913,  43.00369577,
                   42.83988241,  42.67606905,  42.51225569,  42.36251523,
                   42.28189141,  42.20126759,  42.12064377,  42.07213976,
                   42.13834934,  42.20455893,  42.27076852,  42.3369781,
                   42.40318769,  42.46939727,  42.53560686,  42.60181644,
                   42.66802603,  42.73423561,  42.8004452,  42.86665478,
                   42.93286437,  42.99907396,  43.06528354,  43.13149313,
                   43.19770271,  43.2639123,  43.3332894,  43.4137205,
                   43.4941516,  43.53372897,  43.57136093,  43.60899288,
                   43.64662483,  43.68425679,  43.72188874,  43.7595207,
                   43.79715265,  43.83478461,  43.87241656,  43.91004852,
                   43.94768047,  43.98531243,  44.0348583,  44.09911479,
                   44.16337128,  44.22762778,  44.29188427,  44.37808748,
                   44.48055508,  44.58302268,  44.68549028,  44.78795788,
                   44.89042548,  44.99289308,  45.09536068,  45.19782828,
                   45.30029588,  45.40276348,  45.50523108,  45.60769868,
                   45.71016628,  45.81263388,  45.91510148,  46.01756908,
                   46.12003668,  46.22250428,  46.32497188,  46.42743948,
                   46.52990709,  46.63341174,  46.74402763,  46.85464352,
                   46.96525941,  47.07587529,  47.18649118,  47.29710707,
                   47.40758472,  47.51763525,  47.62768578,  47.73773631,
                   47.84778684,  47.95783737,  48.06899544,  48.19204114,
                   48.31508684,  48.43813254,  48.56117824,  48.68422394,
                   48.80746408,  48.93430132,  49.06113857,  49.18797581,
                   49.31481306,  49.44165031,  49.56848755,  49.6953248,  49.82216204])

x = np.linspace(0, 1.5, 1000)

avg = (np.interp(x, slip1, bond1) + np.interp(x, slip2, bond2) + np.interp(x, slip3, bond3) + np.interp(x, slip4, bond4) + np.interp(x, slip5, bond5) +
       np.interp(x, slip6, bond6) + np.interp(x, slip7, bond7) + np.interp(x, slip8, bond8) + np.interp(x, slip9, bond9) +
       np.interp(x, slip10, bond10) + np.interp(x, slip11, bond11) + np.interp(x, slip12, bond12)) / 12.

# plt.plot(x, avg, 'k--', lw=2, label='average')
#
# plt.plot(x_long, y_long / 9., 'r--', lw=2, label='long_specimen_avg')


import StringIO
bond_file = 'D:\\data\\dresden\\bond_law.txt'
s = open(bond_file).read().replace(',', '.')
bond_data = np.loadtxt(StringIO.StringIO(s), usecols=(5, 6, 8, 9, 11, 12))
w_arr = np.array([0, bond_data[0, 1], bond_data[0, 3], bond_data[0, 5]])
T_arr = np.array([0, bond_data[0, 0], bond_data[0, 2], bond_data[0, 4]])

plt.plot(x, np.interp(x, w_arr, T_arr))


w_arr = np.array([0, bond_data[1, 1], bond_data[1, 3], bond_data[1, 5]])
T_arr = np.array([0, bond_data[1, 0], bond_data[1, 2], bond_data[1, 4]])

plt.plot(x, np.interp(x, w_arr, T_arr))


print bond_data[:, 0]
print bond_data[:, 4]


plt.legend(ncol=3, loc='best')
plt.xlabel('slip[mm]')
plt.ylabel('bond[N/mm]')

plt.show()
