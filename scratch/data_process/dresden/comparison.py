'''
Created on 22.02.2016

@author: Yingxiong
'''
import numpy as np
import StringIO
import matplotlib.pyplot as plt


slip1 = np.array([0.0, 0.0167, 0.033399999999999999, 0.050099999999999999, 0.066799999999999998, 0.089999999999999997, 0.10777777777777778, 0.12555555555555556, 0.14333333333333331, 0.16111111111111109, 0.17888888888888888,
                  0.19666666666666666, 0.21444444444444444, 0.23222222222222222, 0.25, 0.34999999999999998, 0.51428571428571423, 0.6785714285714286, 0.84285714285714286, 1.0071428571428571, 1.1714285714285713, 1.3357142857142859, 1.5])
bond1 = np.array([0.0, 7.6088333549124725, 15.21766681176379, 22.826500268615117, 30.435333725466453, 26.22680501263744, 21.72889377287015, 20.64915445555593, 7.446138959763085, 6.744324296530344, 6.535446157571006,
                  6.387625831079449, 6.277306042775117, 6.195209036126417, 6.144971305702221, 5.943285240411173, 6.086392458385862, 6.040626787139278, 6.109113424693133, 6.137670292907936, 6.115076842532124, 6.103835908601188, 6.184784029252357])

slip2 = np.array([0.0, 0.022349999999999998, 0.044699999999999997, 0.070000000000000007, 0.090000000000000011, 0.11000000000000001, 0.13, 0.15000000000000002, 0.17000000000000001, 0.19,
                  0.21000000000000002, 0.23000000000000001, 0.25, 0.34999999999999998, 0.51428571428571423, 0.6785714285714286, 0.84285714285714286, 1.0071428571428571, 1.1714285714285713, 1.3357142857142859, 1.5])
bond2 = np.array([0.0, 17.701306700132097, 35.402613432976686, 34.41342764904337, 31.208356362179508, 27.370911463157036, 20.4260351641487, 14.72146743080458, 13.359017564362818, 12.862749686231835, 12.439410417802359,
                  11.564533516572686, 11.390762471483313, 11.108035475066938, 10.907086484456359, 10.927076200478599, 11.256443606270846, 11.110249743579576, 11.126353400658614, 11.024596683726228, 11.111594980524512])

slip3 = np.array([0.0, 0.030849999999999999, 0.061699999999999998, 0.12, 0.13999999999999999, 0.16, 0.17999999999999999, 0.20000000000000001, 0.22, 0.23999999999999999, 0.26000000000000001,
                  0.28000000000000003, 0.29999999999999999, 0.34999999999999998, 0.51428571428571423, 0.6785714285714286, 0.84285714285714286, 1.0071428571428571, 1.1714285714285713, 1.3357142857142859, 1.5])
bond3 = np.array([0.0, 19.531870935846296, 39.06374191200411, 35.13245161327588, 34.86040395302558, 34.118784844044605, 33.164131887624976, 17.570528297506577, 15.64891401963593, 13.45859492092352,
                  11.23505687665982, 10.562053272750111, 10.02457117454648, 9.402856922596214, 8.693647863640045, 8.6230584738389, 8.68140796212051, 8.61385286179438, 8.450586540242105, 8.481673272919226, 8.54978551615499])

slip4 = np.array([0.0, 0.057500000000000002, 0.115, 0.14999999999999999, 0.16666666666666666, 0.18333333333333332, 0.20000000000000001, 0.21666666666666667, 0.23333333333333334, 0.25, 0.26666666666666666,
                  0.28333333333333333, 0.29999999999999999, 0.34999999999999998, 0.51428571428571423, 0.6785714285714286, 0.84285714285714286, 1.0071428571428571, 1.1714285714285713, 1.3357142857142859, 1.5])
bond4 = np.array([0.0, 15.293392386987824, 31.10578484956067, 29.08624455044272, 28.122932687946694, 25.124475509005038, 22.037427941448023, 21.334682957600144, 8.885563341721895, 8.46724264720299,
                  8.400087115745553, 8.390761710431336, 8.327999814223086, 8.47124979441856, 8.950601800999078, 9.164418152185474, 9.722647682676415, 10.118971686018229, 10.372509959011435, 10.43814261528225, 10.578404516063465])

slip5 = np.array([0.0, 0.047750000000000001, 0.095500000000000002, 0.12, 0.13999999999999999, 0.16, 0.17999999999999999, 0.20000000000000001, 0.22, 0.23999999999999999, 0.26000000000000001,
                  0.28000000000000003, 0.29999999999999999, 0.34999999999999998, 0.51428571428571423, 0.6785714285714286, 0.84285714285714286, 1.0071428571428571, 1.1714285714285713, 1.3357142857142859, 1.5])
bond5 = np.array([0.0, 15.56219604033105, 31.81953493892064, 26.104446008346834, 23.977774950282, 22.312332862871667, 9.54675528459605, 8.751285405457157, 8.407042658775277, 8.085145115761568,
                  7.863267674383558, 7.80766101866833, 7.823214104431405, 7.8489372473932475, 8.003063589054706, 8.051872262440984, 8.022129065893166, 7.986851855831132, 7.809959004410668, 7.720275331593954, 7.6178569667237515])

slip6 = np.array([0.0, 0.030849999999999999, 0.061699999999999998, 0.089999999999999997, 0.11333333333333333, 0.13666666666666666, 0.15999999999999998, 0.18333333333333332, 0.20666666666666667, 0.22999999999999998,
                  0.2533333333333333, 0.27666666666666662, 0.29999999999999999, 0.34999999999999998, 0.51428571428571423, 0.6785714285714286, 0.84285714285714286, 1.0071428571428571, 1.1714285714285713, 1.3357142857142859, 1.5])
bond6 = np.array([0.0, 15.680044228140858, 31.36008850780363, 27.051761218813624, 23.671453961241415, 8.427861663021929, 6.643642738255938, 5.978452210173134, 5.422476049188153, 5.100749880111076,
                  5.005226087357627, 4.8558570794714235, 4.784333227890493, 4.919874878109198, 5.476339958388238, 6.077992141937612, 6.542295737296617, 6.903326356820516, 7.2840610394798615, 7.708948778394801, 8.236999765777279])

slip7 = np.array([0.0, 0.044999999999999998, 0.089999999999999997, 0.12, 0.13999999999999999, 0.16, 0.17999999999999999, 0.20000000000000001, 0.22, 0.23999999999999999, 0.26000000000000001,
                  0.28000000000000003, 0.29999999999999999, 0.34999999999999998, 0.51428571428571423, 0.6785714285714286, 0.84285714285714286, 1.0071428571428571, 1.1714285714285713, 1.3357142857142859, 1.5])
bond7 = np.array([0.0, 15.462963888886003, 31.528284932814625, 32.075213536139664, 32.88795940325237, 33.72689195515675, 31.12751614644016, 29.93821749670961, 11.633678248015123, 10.660910470361458,
                  10.39549975793086, 10.164809287634503, 10.118190243849511, 10.11888897109841, 9.969239565994119, 10.219964838281948, 10.467254855123107, 10.694617095749473, 10.665265059092091, 10.574387510391208, 10.64353546765347])

slip8 = np.array([0.0, 0.052999999999999999, 0.106, 0.14000000000000001, 0.15777777777777779, 0.17555555555555558, 0.19333333333333333, 0.21111111111111111, 0.22888888888888889, 0.24666666666666665,
                  0.26444444444444443, 0.28222222222222221, 0.29999999999999999, 0.34999999999999998, 0.51428571428571423, 0.6785714285714286, 0.84285714285714286, 1.0071428571428571, 1.1714285714285713, 1.3357142857142859, 1.5])
bond8 = np.array([0.0, 17.52232098843854, 35.04464201114325, 30.393006402216656, 30.06545088665049, 29.73789533868206, 7.154277705110144, 6.524232593913113, 6.252544826713279, 6.121011820770713,
                  5.987578887883472, 5.9051308298037535, 5.885357006730958, 5.7958927251824734, 5.723336602238125, 5.746305887642299, 5.841020272617518, 5.958081494172905, 6.057469247156753, 6.151418224617531, 6.322017709239996])

slip9 = np.array([0.0, 0.068000000000000005, 0.14000000000000001, 0.15777777777777779, 0.17555555555555558, 0.19333333333333333, 0.21111111111111111, 0.22888888888888889, 0.24666666666666665,
                  0.26444444444444443, 0.28222222222222221, 0.29999999999999999, 0.34999999999999998, 0.51428571428571423, 0.6785714285714286, 0.84285714285714286, 1.0071428571428571, 1.1714285714285713, 1.3357142857142859, 1.5])
bond9 = np.array([0.0, 22.27077327623037, 24.049614815523725, 24.298086737413268, 23.113843536170066, 8.075206037936516, 7.548952177455171, 7.274727342642916, 7.128226105265697, 7.03600514791491,
                  6.9313589955015535, 6.898229278366353, 6.937731981962904, 7.19706785535528, 7.285418198392122, 7.329356973063341, 7.426872276678061, 7.258346772067938, 7.3049539123992435, 7.086839124634319])

slip10 = np.array([0.0, 0.092700000000000005, 0.14000000000000001, 0.15777777777777779, 0.17555555555555558, 0.19333333333333333, 0.21111111111111111, 0.22888888888888889, 0.24666666666666665,
                   0.26444444444444443, 0.28222222222222221, 0.29999999999999999, 0.34999999999999998, 0.51428571428571423, 0.6785714285714286, 0.84285714285714286, 1.0071428571428571, 1.1714285714285713, 1.3357142857142859, 1.5])
bond10 = np.array([0.0, 33.634056245090775, 27.255419956987847, 26.79563837185104, 9.877309186150079, 9.00290455620587, 8.761121488933817, 8.676251137277644, 8.616412504256395, 8.593444181811302,
                   8.56845218287728, 8.52604742348907, 8.583767657705087, 9.14530840941739, 9.334744679731626, 9.503887533535286, 9.462907944097832, 9.47930585104469, 9.504463943551565, 9.698642630331797])

slip11 = np.array([0.0, 0.126, 0.14999999999999999, 0.16666666666666666, 0.18333333333333332, 0.20000000000000001, 0.21666666666666667, 0.23333333333333334, 0.25, 0.26666666666666666,
                   0.28333333333333333, 0.29999999999999999, 0.34999999999999998, 0.51428571428571423, 0.6785714285714286, 0.84285714285714286, 1.0071428571428571, 1.1714285714285713, 1.3357142857142859, 1.5])
bond11 = np.array([0.0, 29.582213488721056, 24.680785160160525, 24.270093580851924, 6.7554759181538655, 6.29149983330559, 6.200309402070533, 6.158428430896445, 6.1078024292315725, 6.082726050036531,
                   6.0823689064917135, 6.058499860059061, 6.064142696511199, 6.658856926595552, 6.762527053915721, 6.918224328434968, 7.016693714742273, 7.012744732517623, 6.973047457550533, 7.017714123137747])

slip12 = np.array([0.0, 0.109, 0.13, 0.1488888888888889, 0.16777777777777778, 0.18666666666666665, 0.20555555555555555, 0.22444444444444445, 0.24333333333333332, 0.26222222222222219,
                   0.28111111111111109, 0.29999999999999999, 0.34999999999999998, 0.51428571428571423, 0.6785714285714286, 0.84285714285714286, 1.0071428571428571, 1.1714285714285713, 1.3357142857142859, 1.5])
bond12 = np.array([0.0, 27.745056490147885, 23.870070728610887, 23.2961194362025, 5.900114090993536, 5.40295223684805, 5.345668531187051, 5.346507811486545, 5.329607019516358, 5.368589821415174,
                   5.4406724846731285, 5.471101107257605, 5.671309366906551, 6.180676688601286, 6.65936035760773, 7.062846755793178, 7.079642638774973, 7.193520241104466, 7.241010036327608, 7.343785543861939])

slip_lst = [slip1, slip2, slip3, slip4, slip5, slip6,
            slip7, slip8, slip9, slip10, slip11, slip12]
bond_lst = [bond1, bond2, bond3, bond4, bond5, bond6,
            bond7, bond8, bond9, bond10, bond11, bond12]

bond_file = 'D:\\data\\dresden\\bond_law.txt'
s = open(bond_file).read().replace(',', '.')
bond_data = np.loadtxt(StringIO.StringIO(s), usecols=(5, 6, 8, 9, 11, 12))

x = np.linspace(0, 1.5, 1000)

for i in range(12):
    plt.figure()
    w_arr = np.array([0, bond_data[i, 1], bond_data[i, 3], bond_data[i, 5]])
    T_arr = np.array([0, bond_data[i, 0], bond_data[i, 2], bond_data[i, 4]])
    plt.plot(x, np.interp(x, w_arr, T_arr), label='trilinear')
    plt.plot(slip_lst[i], bond_lst[i], label='multilinear')
    plt.xlabel('crack opening [mm]')
    plt.ylabel('bond [N/mm]')
    plt.title('V4-TA-' + str(i + 1))
    plt.legend()

plt.show()
